<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Booking Metrics Table with Toggles</title>
<style>
  body {
    font-family: 'Be Vietnam Pro', sans-serif;
    padding: 20px;
    background: #fff;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 10px 15px;
    text-align: left;
    vertical-align: middle;
  }
  th {
    background-color: #f5f5f5;
    font-weight: 600;
  }
  tr:nth-child(even){background-color: #fafafa;}
  .positive { color: #03c950; font-weight: 600; }
  .negative { color: #ed5a27; font-weight: 600; }
  .toggles {
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<div class="toggles">
  <label><input type="checkbox" id="showPercent"> Show % of Total</label>
  &nbsp;&nbsp;
  <label><input type="checkbox" id="showDoD"> Show DoD vs Prev</label>
</div>

<table>
  <thead>
    <tr>
      <th>Dimension</th>
      <th>Gross Booking</th>
      <th>Success Trans</th>
      <th>PU</th>
    </tr>
  </thead>
  <tbody id="table-body"></tbody>
</table>

<script>
const data = [
  { dimension: 'package.ws1.royal.web', gross: 120000, prevGross: 100000, success: 110, prevSuccess: 95, pu: 90, prevPU: 85 },
  { dimension: 'package.ws2.silver.web', gross: 90000, prevGross: 95000, success: 85, prevSuccess: 90, pu: 80, prevPU: 85 },
  { dimension: 'package.ws3.gold.web', gross: 150000, prevGross: 130000, success: 140, prevSuccess: 120, pu: 130, prevPU: 110 },
  { dimension: 'package.ws4.platinum.web', gross: 70000, prevGross: 70000, success: 65, prevSuccess: 65, pu: 60, prevPU: 60 },
  { dimension: 'package.ws5.basic.web', gross: 50000, prevGross: 45000, success: 45, prevSuccess: 42, pu: 40, prevPU: 38 },
  { dimension: 'package.ws6.standard.web', gross: 60000, prevGross: 55000, success: 55, prevSuccess: 50, pu: 50, prevPU: 48 },
  { dimension: 'package.ws7.premium.web', gross: 80000, prevGross: 75000, success: 75, prevSuccess: 70, pu: 70, prevPU: 65 }
];

const tbody = document.getElementById('table-body');
const showPercent = document.getElementById('showPercent');
const showDoD = document.getElementById('showDoD');

function renderTable() {
  tbody.innerHTML = '';
  const totalGross = data.reduce((sum,d)=>sum+d.gross,0);
  const totalSuccess = data.reduce((sum,d)=>sum+d.success,0);
  const totalPU = data.reduce((sum,d)=>sum+d.pu,0);

  data.forEach(d=>{
    const tr = document.createElement('tr');

    function formatAdditional(value, total, prev) {
      let text = '';
      if(showPercent.checked) {
        text += ` (${((value/total)*100).toFixed(1)}%)`;
      }
      if(showDoD.checked) {
        const diff = ((value-prev)/prev*100).toFixed(1);
        const cls = diff>=0?'positive':'negative';
        text += ` <span class="${cls}">${diff>=0?'+':''}${diff}%</span>`;
      }
      return text;
    }

    tr.innerHTML = `
      <td>${d.dimension}</td>
      <td>${d.gross.toLocaleString()}${formatAdditional(d.gross,totalGross,d.prevGross)}</td>
      <td>${d.success.toLocaleString()}${formatAdditional(d.success,totalSuccess,d.prevSuccess)}</td>
      <td>${d.pu.toLocaleString()}${formatAdditional(d.pu,totalPU,d.prevPU)}</td>
    `;

    tbody.appendChild(tr);
  });
}

// Initial render
renderTable();

// Event listeners
showPercent.addEventListener('change', renderTable);
showDoD.addEventListener('change', renderTable);
</script>

</body>
</html>
