<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CCU Comparison Chart</title>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
<style>
  body { font-family: 'Be Vietnam Pro', sans-serif; background:#fff; padding:20px; }
  #ccuChart { width:100%; height:420px; }
</style>
</head>
<body>

<div id="ccuChart"></div>

<script>
// ------- Sample Data (thay bằng dữ liệu thực của bạn) -------
const minutes = Array.from({length: 1440}, (_, i) => `${String(Math.floor(i/60)).padStart(2,'0')}:${String(i%60).padStart(2,'0')}`);

const ccu_today = minutes.map((t,i)=> 2000 + Math.sin(i/50)*200 + (i>1320 && i<1360?500:0));       // CCU today (10PM peak)
const ccu_compare = minutes.map((t,i)=> 1800 + Math.sin(i/45)*180 + (i>1260 && i<1300?450:0));   // CCU compare (9PM peak)
const active_servers = minutes.map(()=> 5 + Math.round(Math.random())); // 5–6 servers
// ------------------------------------------------------------

// Setup chart
let chart = echarts.init(document.getElementById('ccuChart'));

chart.setOption({
    tooltip: {
        trigger: 'axis',
        backgroundColor: 'rgba(0,0,0,0.75)',
        textStyle: { color: '#fff' },
        formatter: params => {
            let time = params[0].axisValue;
            let lines = params.map(p => 
                `<div style="margin:2px 0;">
                    <span style="display:inline-block;width:10px;height:10px;background:${p.color};border-radius:50%;margin-right:6px;"></span>
                    ${p.seriesName}: <b>${p.data}</b>
                </div>`
            ).join('');
            return `<b>${time}</b><br>${lines}`;
        }
    },

    legend: {
        top: 10,
        textStyle: { fontSize: 12 }
    },

    grid: {
        left: 65,
        right: 20,
        top: 50,
        bottom: 40
    },

    xAxis: {
        type: 'category',
        data: minutes,
        boundaryGap: false,
        axisLabel: { show: false }
    },

    yAxis: [
        {
            type: 'value',
            name: 'Concurrent\nUsers',
            nameLocation: 'middle',
            nameGap: 45,
            nameRotate: 0,   // xoay ngang
            axisLine: { show: true },
            axisTick: { show: true },
            splitLine: { lineStyle: { type: 'dashed' } }
        },
        {
            type: 'value',
            name: 'Servers',
            nameLocation: 'middle',
            nameGap: 45,
            nameRotate: 0, // xoay ngang
            axisLine: { show: true },
            axisTick: { show: true },
            splitLine: { show:false }
        }
    ],

    series: [
        {
            name: 'CCU 2025-11-14',
            type: 'line',
            smooth: true,
            symbol: 'none',
            lineStyle: { width: 1.2 },
            data: ccu_today
        },
        {
            name: 'CCU 2025-11-13',
            type: 'line',
            smooth: true,
            symbol: 'none',
            lineStyle: { width: 1.2 },
            data: ccu_compare
        },
        {
            name: 'Active Server',
            type: 'line',
            yAxisIndex: 1,
            smooth: true,
            symbol: 'none',
            lineStyle: { width: 1.2, type: 'dashed' },
            data: active_servers
        }
    ]
});
</script>
</body>
</html>
