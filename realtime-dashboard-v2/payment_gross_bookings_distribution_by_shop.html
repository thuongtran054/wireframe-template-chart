<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Donut Chart with Total</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Be Vietnam Pro', sans-serif;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    #chart {
      width: 100%;
      max-width: 600px;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="chart"></div>
  
  <script>
    const chartDom = document.getElementById('chart');
    const myChart = echarts.init(chartDom);

    const data = [
      { value: 291300000, name: 'WEB' },
      { value: 71300000, name: 'IAP' },
    ];

    const total = data.reduce((sum, item) => sum + item.value, 0);

    const option = {
      color: ['#145dfc', '#ed5a27'],
      tooltip: {
        trigger: 'item',
        backgroundColor: 'rgba(255,255,255,0.95)',
        borderWidth: 0,
        textStyle: {
          color: '#000',
          fontFamily: 'Be Vietnam Pro, sans-serif',
          fontSize: 13,
        },
        formatter: params => {
          const value = params.value.toLocaleString();
          const percent = params.percent.toFixed(1);
          return `
            <div style="font-family:'Be Vietnam Pro',sans-serif;">
              <strong>${params.name}: ${value}</strong> <br/>
              % of Total: ${percent}%
            </div>
          `;
        }
      },

      legend: { show: false },

      // ⭐ TEXT TOTAL ở giữa
      graphic: [
        {
          type: 'text',
          left: 'center',
          top: '48%',
          style: {
            text: total.toLocaleString('en-US'),
            fontSize: 24,
            fontFamily: 'Be Vietnam Pro',
            fontWeight: '600',
            fill: '#000',
            textAlign: 'center'
          }
        },
        {
          type: 'text',
          left: 'center',
          top: '55%',
          style: {
            text: 'Total',
            fontSize: 14,
            fontFamily: 'Be Vietnam Pro',
            fontWeight: '400',
            fill: '#000',
            textAlign: 'center'
          }
        }
      ],

      series: [
        {
          name: 'Platform Revenue',
          type: 'pie',
          radius: ['50%', '70%'],
          avoidLabelOverlap: false,
          label: {
            show: true,
            position: 'outside',
            formatter: params => {
              const value = params.value.toLocaleString();
              const percent = params.percent.toFixed(1);
              return `${params.name} (${percent}%)\n${value}`;
            },
            fontFamily: 'Be Vietnam Pro',
            fontSize: 13,
            color: '#333',
            lineHeight: 18,
          },
          labelLine: {
            show: true,
            length: 15,
            length2: 10,
            smooth: true,
          },
          emphasis: {
            scale: true,
            scaleSize: 10,
          },
          data: data,
        },
      ],
    };

    myChart.setOption(option);

    window.addEventListener('resize', () => {
      myChart.resize();
    });
  </script>
</body>
</html>
